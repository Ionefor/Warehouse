Привет, написал проект для хакатона, за 2 дня не получилось сделать особо много, да и в целом много идей пришло после его окончания ))

Warehouse System

Это приложение представляет собой систему управления складскими запасами, обеспечивающую: 

  Управление созданием и конфигурацией складов
  
  Автоматическое распределение товаров между складами с помощью консистентного хеширования
  
  Отслеживание заполненности складов и секций через аналитические модели WarehouseView и SectionView
  
  Уведомления по email о перемещении и приемке товаров
  
  Высокую производительность благодаря кешированию данных в Redis
  
  Фоновые задачи для распределения товаров и обработки очередей
  
Стек:
 
Backend

  • Язык/Фреймворк: C#, ASP.NET Core
  
Архитектура:

  • Чистая архитектура (Clean Architecture) с четким разделением слоев
  
  • Модульный монолит (Modular Monolith) для гибкости и масштабируемости
  
  • DDD подход
  
  • CQRS (Command Query Responsibility Segregation) с разделением на:
  
  • Read Context (оптимизирован для запросов, DTO-проекции)
  
  • Write Context (обработка команд, доменная логика)
  
  • Фоновые сервисы для асинхронных задач
  
Базы данных:

• PostgreSQL (основное хранилище, реляционная модель)

• Entity Framework Core (ORM для работы с данными, миграции)

• Redis (кеширование запросов, инвалидация по TTL)

Интеграции:

• SMT-сервис 

• FluentValidation

Warehouse:

1) Создание склада
   
  Параметры:
  
  •	Название склада
  
  •	Габариты склада (ширина, длина, высота)
  
  •	Email для уведомлений
  
  •	Список секций (с указанием их типов: Large, Medium, Small)
  
  Логика работы:
  
  1.	Проверка вместимости:
     
  o	Система проверяет, можно ли разместить все указанные секции на складе с учетом их габаритов, используя Shelf First Fit Decreasing (FFD) алгоритм.
  
  o	Для каждой секции автоматически создаются ряды и полки, высота секции равна высоте склада.
  
  o	Размеры полок определяются типом секции:
  
    	Large – большие полки
    
    	Medium – средние полки
    
    	Small – маленькие полки
    
  o	Каждая полка имеет свойства:
  
    	Row (ряд)
    
    	Column (колонка)
    
    	IsAvailable (доступна ли для размещения)
    
    	Size (размер в зависимости от типа секции)

На одной полке может находится не более одного товара.
    
Если проверка пройдена успешно, склад создается вместе с секциями, рядами и полками.

2) Получение информации о складах и секциях
   
  Доступные методы:
  
  o Получение списка складов (с пагинацией)
  
  o Получение списка секций конкретного склада (с пагинацией)
  
  Формат вывода:
  
  • Модели данных с поддержкой постраничного вывода для оптимизации производительности.

4) Удаление склада по ID
   
  Логика работы:
  
    Проверка существования:
    
     • Система проверяет наличие склада с указанным Id.
     
    Удаление и перераспределение товаров:
    
     • Если склад существует, он удаляется.
     
     • Все товары, находившиеся на этом складе, перемещаются в категорию "Товары для распределения".
     
    Фоновое распределение:
    
     • Фоновый сервис автоматически распределяет эти товары по другим доступным складам.

WarehouseView:

1) Получение модели WarehouseView
   
Параметры:

  •	WarehouseName (string) - название склада
  
  •	SectionCount (int) - общее количество секций
  
  •	LargeSectionCount (int) - количество секций типа Large
  
  •	MediumSectionCount (int) - количество секций типа Medium
  
  •	SmallSectionCount (int) - количество секций типа Small
  
  •	WarehouseFullness (double) - процент заполненности склада
  
Логика работы:

  Сбор данных:
  
    •	Система анализирует все секции склада
    
    •	Для каждой секции определяется тип на основе размера полок:
    
    •	Large: для крупногабаритных товаров
    
    •	Medium: для стандартных товаров
    
    •	Small: для мелких товаров
    
  Расчет показателей:
  
   • Подсчитывается общее количество секций каждого типа
   
   • Рассчитывается заполненность как отношение занятых полок к общему количеству
   
  Формирование результата:
  
   • Данные агрегируются в модель WarehouseView
   
3) Получение модели SectionView
   
Параметры:

  • SectionRowCount (int) - количество рядов в секции
  
  •	SectionRowShelfsCount (int) - количество полок в ряду

  •	Type (enum) - тип секции (Large/Medium/Small)
  
  •	SectionFullness (double) - процент заполненности секции
  
Логика работы:

  Сбор данных:
  
  • Система анализирует заданную секции склада
  
  • Определяется тип секции:
  
    • Large: для крупногабаритных товаров
    
    • Medium: для стандартных товаров
    
    • Small: для мелких товаров
    
  Расчет показателей:
  
   • Подсчитывается количество ряда секции
   
   • Подсчитывается количество полок ряда
   
   • Рассчитывается заполненность как отношение занятых полок к общему количеству
   
  Формирование результата:
  
   • Данные агрегируются в модель SectionView
   
ProductPlacement:

1) Добавление и распределение товаров
   
Параметры:

  • Название товара
  
  • Категория товара
  
  • Описание
  
  • Размер
  
Логика работы:

  • Товары добавляются в PendingProducts(таблица для распределения)
  
  • Выполняется фоновое распределение согласно расписанию
  
  • После поступления товара на склад, отправляется уведомление на почту склада при помощи EmailService
  
  • В случае ошибки товар остается в PendingProducts(таблица для распределения)

3) Получение Products, PendingProducts и ProductStorage
   
Логика работы:

 • Получение моделей соответсвубщих сущностей с применением кеширования(Redis)
 
Формат вывода:

  • Модели данных с поддержкой постраничного вывода для оптимизации производительности.

5) Перемещение товара

Логика работы:

  • На вход приходят следующие параметры:
  
    • Id Товара
    
    • Id Склада
    
    • Id Секции
    
    • Номер ряда
    
    • Расположение полки в ряду (row, column)
    
  • Проверяется существование товара, склада и тд.
  
  • Если все верно, то товар отправляется в указанное местоположение
  
  • После поступления товара на склад, отправляется уведомление на почту склада при помощи EmailService

ProductPlacementService:

  Назначение:
  
    • Фоновый сервис для автоматического распределения товаров из PendingProducts по складам с использованием консистентного хеширования.
    
  Ключевые характеристики:
  
    • Работает как фоновый процесс (Background Service)
    
    • Использует консистентное хеширование для выбора склада
    
  Механизм распределения:
  
    • Кольцо консистентного хеширования по id склада
    
    • Виртуальные узлы для каждого склада
    
    • Хеш-функция на основе категории товара

Нереализованные планы:

1. Тестирование
   
2. Retry-policy для сервиса распределения товаров
   
3. Более обширная логика взаимодействия с товарами по мимо их отправки на другое место

План улучшений для Warehouse System:

1. Тестирование системы
   
  • Модульные тесты
  
  • Интеграционные тесты

2. Улучшение логики заполняемости складов
  
  • Возможность перегрузить отдельные склады

  • Проблема с распределением товаров при добавлении новых

3. Retry-policy
   
  • Добавление механизма повтора выполняемых действий в случае возникновения ошибок

4. Расширение характеристик и логики для товаров и складов
   
   • Проработка моделей товаров и складов
   
5. Поработать над логикой ProductStorage
   
   • Возможно стоит хранить историю товаров в отдельной таблице или попробовать реализовать Event Sourcing для товаров
